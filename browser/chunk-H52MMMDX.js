import{a as M}from"./chunk-I53ZPROP.js";import{a as A,b as u,c as k,d as P,f as D,g as G,i as B,m as O,o as V}from"./chunk-2I67LZUT.js";import{e as L,f as q}from"./chunk-BAG2IDU5.js";import"./chunk-YFPKJNUV.js";import{$ as b,$a as c,Ca as F,Ha as N,Kb as R,Ma as d,Mb as w,Ob as T,Ta as a,Wa as r,Xa as i,Ya as g,_a as E,eb as m,gb as I,nb as f,ya as n}from"./chunk-GXRW5RWN.js";var S=e=>({"border-red-500":e});function z(e,l){e&1&&(r(0,"span"),m(1,"First name is required"),i())}function H(e,l){e&1&&(r(0,"span"),m(1,"First name must be at least 2 characters"),i())}function J(e,l){e&1&&(r(0,"span"),m(1,"First name cannot exceed 50 characters"),i())}function K(e,l){if(e&1&&(r(0,"div",19),d(1,z,2,0,"span",15)(2,H,2,0,"span",15)(3,J,2,0,"span",15),i()),e&2){let o,t,s,p=c();n(),a("ngIf",(o=p.registerForm.get("firstName"))==null||o.errors==null?null:o.errors.required),n(),a("ngIf",(t=p.registerForm.get("firstName"))==null||t.errors==null?null:t.errors.minlength),n(),a("ngIf",(s=p.registerForm.get("firstName"))==null||s.errors==null?null:s.errors.maxlength)}}function Q(e,l){e&1&&(r(0,"span"),m(1,"Last name is required"),i())}function U(e,l){e&1&&(r(0,"span"),m(1,"Last name must be at least 2 characters"),i())}function W(e,l){e&1&&(r(0,"span"),m(1,"Last name cannot exceed 50 characters"),i())}function X(e,l){if(e&1&&(r(0,"div",19),d(1,Q,2,0,"span",15)(2,U,2,0,"span",15)(3,W,2,0,"span",15),i()),e&2){let o,t,s,p=c();n(),a("ngIf",(o=p.registerForm.get("lastName"))==null||o.errors==null?null:o.errors.required),n(),a("ngIf",(t=p.registerForm.get("lastName"))==null||t.errors==null?null:t.errors.minlength),n(),a("ngIf",(s=p.registerForm.get("lastName"))==null||s.errors==null?null:s.errors.maxlength)}}function Y(e,l){e&1&&(r(0,"span"),m(1,"Email is required"),i())}function Z(e,l){e&1&&(r(0,"span"),m(1,"Please enter a valid email address"),i())}function $(e,l){e&1&&(r(0,"span"),m(1,"Email cannot exceed 100 characters"),i())}function ee(e,l){if(e&1&&(r(0,"div",19),d(1,Y,2,0,"span",15)(2,Z,2,0,"span",15)(3,$,2,0,"span",15),i()),e&2){let o,t,s,p=c();n(),a("ngIf",(o=p.registerForm.get("email"))==null||o.errors==null?null:o.errors.required),n(),a("ngIf",(t=p.registerForm.get("email"))==null||t.errors==null?null:t.errors.email),n(),a("ngIf",(s=p.registerForm.get("email"))==null||s.errors==null?null:s.errors.maxlength)}}function te(e,l){e&1&&(r(0,"span"),m(1,"Password is required"),i())}function ie(e,l){e&1&&(r(0,"span"),m(1,"Password must be at least 8 characters long"),i())}function re(e,l){if(e&1&&(r(0,"div",19),d(1,te,2,0,"span",15)(2,ie,2,0,"span",15),i()),e&2){let o,t,s=c();n(),a("ngIf",(o=s.registerForm.get("password"))==null||o.errors==null?null:o.errors.required),n(),a("ngIf",(t=s.registerForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}function ne(e,l){if(e&1&&(r(0,"div",20),m(1),i()),e&2){let o=c();n(),I(" ",o.errorMessage," ")}}function le(e,l){e&1&&(r(0,"span"),b(),r(1,"svg",21),g(2,"circle",22)(3,"path",23),i(),m(4," Registering... "),i())}function ae(e,l){e&1&&(r(0,"span"),m(1,"Register"),i())}var j=class e{constructor(l,o,t){this.formBuilder=l;this.router=o;this.authService=t}registerForm;isSubmitting=!1;errorMessage="";ngOnInit(){this.initForm()}initForm(){this.registerForm=this.formBuilder.group({firstName:["",[u.required,u.minLength(2),u.maxLength(50)]],lastName:["",[u.required,u.minLength(2),u.maxLength(50)]],email:["",[u.required,u.email,u.maxLength(100)]],password:["",[u.required,u.minLength(8)]]})}onSubmit(){this.registerForm.invalid||(this.isSubmitting=!0,this.errorMessage="",this.authService.register(this.registerForm.value).subscribe({next:l=>{l.roles.includes("ROLE_ADMIN")?this.router.navigate(["/admin"]):l.roles.includes("ROLE_APPLICANT")?this.router.navigate(["/applicant"]):this.router.navigate(["/"])},error:l=>{this.errorMessage=l.message||"Registration failed. Please try again.",this.isSubmitting=!1},complete:()=>{this.isSubmitting=!1}}))}static \u0275fac=function(o){return new(o||e)(F(O),F(L),F(M))};static \u0275cmp=N({type:e,selectors:[["app-register"]],decls:33,vars:21,consts:[[1,"w-full"],[1,"text-xl","font-semibold","mb-6","text-center"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","formControlName","firstName","placeholder","John",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngClass"],["class","text-red-500 text-sm",4,"ngIf"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","formControlName","lastName","placeholder","Doe",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngClass"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","formControlName","email","placeholder","your.email@example.com",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngClass"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngClass"],["class","text-red-500 text-sm text-center",4,"ngIf"],["type","submit",1,"w-full","py-2","px-4","bg-primary-600","hover:bg-primary-700","text-white","font-medium","rounded-md","transition-colors",3,"disabled"],[4,"ngIf"],[1,"mt-6","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/login",1,"text-primary-600","hover:text-primary-800","font-medium"],[1,"text-red-500","text-sm"],[1,"text-red-500","text-sm","text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white","inline-block"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(o,t){if(o&1&&(r(0,"div",0)(1,"h2",1),m(2,"Create an Account"),i(),r(3,"form",2),E("ngSubmit",function(){return t.onSubmit()}),r(4,"div",3)(5,"label",4),m(6,"First Name"),i(),g(7,"input",5),d(8,K,4,3,"div",6),i(),r(9,"div",3)(10,"label",7),m(11,"Last Name"),i(),g(12,"input",8),d(13,X,4,3,"div",6),i(),r(14,"div",3)(15,"label",9),m(16,"Email"),i(),g(17,"input",10),d(18,ee,4,3,"div",6),i(),r(19,"div",3)(20,"label",11),m(21,"Password"),i(),g(22,"input",12),d(23,re,3,2,"div",6),i(),d(24,ne,2,1,"div",13),r(25,"button",14),d(26,le,5,0,"span",15)(27,ae,2,0,"span",15),i()(),r(28,"div",16)(29,"p",17),m(30," Already have an account? "),r(31,"a",18),m(32,"Log In"),i()()()()),o&2){let s,p,_,v,x,h,y,C;n(3),a("formGroup",t.registerForm),n(4),a("ngClass",f(13,S,((s=t.registerForm.get("firstName"))==null?null:s.invalid)&&((s=t.registerForm.get("firstName"))==null?null:s.touched))),n(),a("ngIf",((p=t.registerForm.get("firstName"))==null?null:p.invalid)&&((p=t.registerForm.get("firstName"))==null?null:p.touched)),n(4),a("ngClass",f(15,S,((_=t.registerForm.get("lastName"))==null?null:_.invalid)&&((_=t.registerForm.get("lastName"))==null?null:_.touched))),n(),a("ngIf",((v=t.registerForm.get("lastName"))==null?null:v.invalid)&&((v=t.registerForm.get("lastName"))==null?null:v.touched)),n(4),a("ngClass",f(17,S,((x=t.registerForm.get("email"))==null?null:x.invalid)&&((x=t.registerForm.get("email"))==null?null:x.touched))),n(),a("ngIf",((h=t.registerForm.get("email"))==null?null:h.invalid)&&((h=t.registerForm.get("email"))==null?null:h.touched)),n(4),a("ngClass",f(19,S,((y=t.registerForm.get("password"))==null?null:y.invalid)&&((y=t.registerForm.get("password"))==null?null:y.touched))),n(),a("ngIf",((C=t.registerForm.get("password"))==null?null:C.invalid)&&((C=t.registerForm.get("password"))==null?null:C.touched)),n(),a("ngIf",t.errorMessage),n(),a("disabled",t.registerForm.invalid||t.isSubmitting),n(),a("ngIf",t.isSubmitting),n(),a("ngIf",!t.isSubmitting)}},dependencies:[T,R,w,V,D,A,k,P,G,B,q],encapsulation:2})};export{j as RegisterComponent};
