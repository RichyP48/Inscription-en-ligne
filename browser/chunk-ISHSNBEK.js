import{a as B}from"./chunk-EEUWHGAI.js";import{a as O,c as R,e as z,n as H}from"./chunk-2I67LZUT.js";import{e as j,i as L}from"./chunk-BAG2IDU5.js";import"./chunk-YFPKJNUV.js";import{$ as d,$a as c,Ca as C,Ha as M,Kb as F,Lb as D,Ma as f,Mb as G,Nb as N,Ob as A,Ta as m,Wa as t,Xa as r,Ya as p,Z as x,Za as w,_,_a as g,aa as h,eb as s,fb as v,gb as y,hb as k,ib as E,jb as V,kb as P,nb as b,qb as T,sb as I,tb as U,ya as a}from"./chunk-GXRW5RWN.js";var S=n=>({"opacity-50 cursor-not-allowed":n}),W=(n,i,e,o)=>({"bg-yellow-100 text-yellow-800":n,"bg-green-100 text-green-800":i,"bg-red-100 text-red-800":e,"bg-gray-100 text-gray-800":o});function J(n,i){n&1&&(t(0,"div",16)(1,"div",17),p(2,"div",18)(3,"div",19),t(4,"div",20),s(5,"Loading"),r()()())}function q(n,i){if(n&1&&(t(0,"div",21)(1,"div",22),d(),t(2,"svg",23),p(3,"path",24),r(),h(),t(4,"span"),s(5),r()()()),n&2){let e=c();a(5),v(e.error)}}function K(n,i){n&1&&(d(),p(0,"path",53))}function Q(n,i){n&1&&(d(),p(0,"path",54))}function X(n,i){n&1&&(d(),p(0,"path",55))}function Y(n,i){n&1&&(d(),p(0,"path",53))}function Z(n,i){n&1&&(d(),p(0,"path",54))}function ee(n,i){n&1&&(d(),p(0,"path",55))}function te(n,i){n&1&&(d(),p(0,"path",53))}function ne(n,i){n&1&&(d(),p(0,"path",54))}function ie(n,i){n&1&&(d(),p(0,"path",55))}function re(n,i){n&1&&(d(),p(0,"path",53))}function ae(n,i){n&1&&(d(),p(0,"path",54))}function oe(n,i){n&1&&(d(),p(0,"path",55))}function se(n,i){if(n&1&&(t(0,"span",65),s(1),r()),n&2){let e=i.$implicit,o=c(3);m("ngClass",o.getRoleClasses(e)),a(),y(" ",e.replace("ROLE_","")," ")}}function le(n,i){if(n&1&&(t(0,"span",65),s(1),r()),n&2){let e=c().$implicit;m("ngClass",T(2,W,e.applicationStatus==="PENDING",e.applicationStatus==="APPROVED",e.applicationStatus==="REJECTED",!e.applicationStatus)),a(),y(" ",e.applicationStatus||"N/A"," ")}}function me(n,i){if(n&1){let e=w();t(0,"tr",56)(1,"td",57),s(2),r(),t(3,"td",58)(4,"div",30)(5,"div",59),s(6),r(),t(7,"div",60)(8,"div",61),s(9),r()()()(),t(10,"td",62),s(11),r(),t(12,"td",58)(13,"div",63),f(14,se,2,2,"span",64),r()(),t(15,"td",58)(16,"span",65),s(17),r()(),t(18,"td",58),f(19,le,2,7,"span",66),r(),t(20,"td",62),s(21),I(22,"date"),r(),t(23,"td",67)(24,"button",68),g("click",function(){let l=x(e).$implicit,u=c(2);return _(u.viewUserApplication(l.id))}),d(),t(25,"svg",10),p(26,"path",69)(27,"path",70),r(),s(28," View "),r()()()}if(n&2){let e=i.$implicit,o=c(2);a(2),v(e.id),a(4),k(" ",e.firstName.charAt(0),"",e.lastName.charAt(0)," "),a(3),k("",e.firstName," ",e.lastName,""),a(2),v(e.email),a(3),m("ngForOf",e.roles),a(2),m("ngClass",o.getStatusClasses(e.enabled,e.locked)),a(),y(" ",o.getStatusText(e.enabled,e.locked)," "),a(2),m("ngIf",e.applicationStatus),a(2),v(U(22,11,e.createdAt,"medium"))}}function de(n,i){if(n&1){let e=w();t(0,"button",71),g("click",function(){let l=x(e).$implicit,u=c(2);return _(u.onPageChange(l))}),s(1),r()}if(n&2){let e=i.$implicit,o=c(2);m("ngClass",e===o.currentPage?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),a(),y(" ",e+1," ")}}function pe(n,i){if(n&1){let e=w();t(0,"div",25)(1,"div",26)(2,"table",27)(3,"thead",28)(4,"tr")(5,"th",29),g("click",function(){x(e);let l=c();return _(l.onSortChange("id"))}),t(6,"div",30),s(7," ID "),d(),t(8,"svg",31),f(9,K,1,0,"path",32)(10,Q,1,0,"path",33)(11,X,1,0,"path",34),r()()(),h(),t(12,"th",29),g("click",function(){x(e);let l=c();return _(l.onSortChange("lastName"))}),t(13,"div",30),s(14," Name "),d(),t(15,"svg",31),f(16,Y,1,0,"path",32)(17,Z,1,0,"path",33)(18,ee,1,0,"path",34),r()()(),h(),t(19,"th",29),g("click",function(){x(e);let l=c();return _(l.onSortChange("email"))}),t(20,"div",30),s(21," Email "),d(),t(22,"svg",31),f(23,te,1,0,"path",32)(24,ne,1,0,"path",33)(25,ie,1,0,"path",34),r()()(),h(),t(26,"th",35),s(27,"Roles"),r(),t(28,"th",35),s(29,"Status"),r(),t(30,"th",35),s(31,"Application"),r(),t(32,"th",29),g("click",function(){x(e);let l=c();return _(l.onSortChange("createdAt"))}),t(33,"div",30),s(34," Created "),d(),t(35,"svg",31),f(36,re,1,0,"path",32)(37,ae,1,0,"path",33)(38,oe,1,0,"path",34),r()()(),h(),t(39,"th",35),s(40,"Actions"),r()()(),t(41,"tbody",36),f(42,me,29,14,"tr",37),r()()(),t(43,"div",38)(44,"div",39)(45,"button",40),g("click",function(){x(e);let l=c();return _(l.onPageChange(l.currentPage-1))}),s(46," Previous "),r(),t(47,"button",41),g("click",function(){x(e);let l=c();return _(l.onPageChange(l.currentPage+1))}),s(48," Next "),r()(),t(49,"div",42)(50,"div")(51,"p",43),s(52," Showing "),t(53,"span",44),s(54),r(),s(55," to "),t(56,"span",44),s(57),r(),s(58," of "),t(59,"span",44),s(60),r(),s(61," results "),r()(),t(62,"div")(63,"nav",45)(64,"button",46),g("click",function(){x(e);let l=c();return _(l.onPageChange(l.currentPage-1))}),t(65,"span",47),s(66,"Previous"),r(),d(),t(67,"svg",48),p(68,"path",49),r()(),f(69,de,2,2,"button",50),h(),t(70,"button",51),g("click",function(){x(e);let l=c();return _(l.onPageChange(l.currentPage+1))}),t(71,"span",47),s(72,"Next"),r(),d(),t(73,"svg",48),p(74,"path",52),r()()()()()()()}if(n&2){let e=c();a(9),m("ngIf",e.sortField!=="id"),a(),m("ngIf",e.sortField==="id"&&e.sortDirection==="asc"),a(),m("ngIf",e.sortField==="id"&&e.sortDirection==="desc"),a(5),m("ngIf",e.sortField!=="lastName"),a(),m("ngIf",e.sortField==="lastName"&&e.sortDirection==="asc"),a(),m("ngIf",e.sortField==="lastName"&&e.sortDirection==="desc"),a(5),m("ngIf",e.sortField!=="email"),a(),m("ngIf",e.sortField==="email"&&e.sortDirection==="asc"),a(),m("ngIf",e.sortField==="email"&&e.sortDirection==="desc"),a(11),m("ngIf",e.sortField!=="createdAt"),a(),m("ngIf",e.sortField==="createdAt"&&e.sortDirection==="asc"),a(),m("ngIf",e.sortField==="createdAt"&&e.sortDirection==="desc"),a(4),m("ngForOf",e.users),a(3),m("disabled",e.currentPage===0)("ngClass",b(25,S,e.currentPage===0)),a(2),m("disabled",e.currentPage>=e.totalPages-1)("ngClass",b(27,S,e.currentPage>=e.totalPages-1)),a(7),v(e.currentPage*e.pageSize+1),a(3),v(e.Math.min((e.currentPage+1)*e.pageSize,e.totalElements)),a(3),v(e.totalElements),a(4),m("disabled",e.currentPage===0)("ngClass",b(29,S,e.currentPage===0)),a(5),m("ngForOf",e.pages),a(),m("disabled",e.currentPage>=e.totalPages-1)("ngClass",b(31,S,e.currentPage>=e.totalPages-1))}}function ce(n,i){n&1&&(t(0,"div",72),d(),t(1,"svg",73),p(2,"path",74),r(),h(),t(3,"h3",75),s(4,"No users found"),r(),t(5,"p",76),s(6,"Try adjusting your search or filters to find what you're looking for."),r()())}var $=class n{constructor(i,e){this.adminService=i;this.router=e}Math=Math;users=[];loading=!1;error="";currentPage=0;pageSize=10;totalElements=0;totalPages=0;sortField="createdAt";sortDirection="desc";searchTerm="";ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.error="";let i=`${this.sortField},${this.sortDirection}`;this.adminService.getUsers(this.currentPage,this.pageSize,i).subscribe({next:e=>{this.users=e.content,this.totalElements=e.totalElements,this.totalPages=e.totalPages,this.loading=!1},error:e=>{this.error="Failed to load users. Please try again.",this.loading=!1,console.error("Error loading users:",e)}})}onPageChange(i){this.currentPage=i,this.loadUsers()}onSortChange(i){this.sortField===i?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=i,this.sortDirection="asc"),this.loadUsers()}getSortIcon(i){return this.sortField!==i?"fa-sort":this.sortDirection==="asc"?"fa-sort-up":"fa-sort-down"}viewUserApplication(i){this.router.navigate(["/admin/users",i])}getRoleClasses(i){switch(i){case"ROLE_ADMIN":return"bg-purple-100 text-purple-800";case"ROLE_APPLICANT":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}getStatusClasses(i,e){return i?e?"bg-red-100 text-red-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}getStatusText(i,e){return i?e?"Locked":"Active":"Disabled"}get pages(){let i=[];if(this.totalPages<=5)for(let o=0;o<this.totalPages;o++)i.push(o);else{let o=Math.max(0,this.currentPage-Math.floor(2.5)),l=Math.min(this.totalPages-1,o+5-1);l===this.totalPages-1&&(o=Math.max(0,l-5+1));for(let u=o;u<=l;u++)i.push(u)}return i}static \u0275fac=function(e){return new(e||n)(C(B),C(j))};static \u0275cmp=M({type:n,selectors:[["app-user-management"]],decls:18,vars:5,consts:[[1,"w-full"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"flex","space-x-2"],[1,"relative"],["type","text","placeholder","Search users...",1,"px-4","py-2","pr-10","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-primary-500",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none","text-gray-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"px-4","py-2","bg-primary-600","text-white","rounded-lg","hover:bg-primary-700","transition-colors","duration-200","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","flex justify-center my-12",4,"ngIf"],["class","bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-lg mb-6 animate-fade-in",4,"ngIf"],["class","bg-white rounded-xl shadow-md overflow-hidden mb-8 animate-fade-in",4,"ngIf"],["class","bg-white rounded-lg shadow-md p-8 text-center",4,"ngIf"],[1,"flex","justify-center","my-12"],[1,"relative","w-20","h-20"],[1,"absolute","top-0","left-0","w-full","h-full","border-4","border-primary-100","rounded-full"],[1,"absolute","top-0","left-0","w-full","h-full","border-4","border-transparent","border-t-primary-600","rounded-full","animate-spin"],[1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","text-primary-600","font-semibold"],[1,"bg-red-50","border-l-4","border-red-500","text-red-700","p-4","rounded-lg","mb-6","animate-fade-in"],[1,"flex"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden","mb-8","animate-fade-in"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","ml-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7",4,"ngIf"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"px-6","py-4","bg-gray-50","border-t","border-gray-200","flex","items-center","justify-between"],[1,"flex-1","flex","justify-between","sm:hidden"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click","disabled","ngClass"],[1,"ml-3","relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click","disabled","ngClass"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled","ngClass"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],["class","relative inline-flex items-center px-4 py-2 border text-sm font-medium",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled","ngClass"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex-shrink-0","h-10","w-10","bg-primary-100","rounded-full","flex","items-center","justify-center","text-primary-700","font-bold"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"flex","flex-wrap","gap-1"],["class","px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],["class","px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",3,"ngClass",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"text-primary-600","hover:text-primary-900","transition-colors","duration-200","mr-3","flex","items-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"relative","inline-flex","items-center","px-4","py-2","border","text-sm","font-medium",3,"click","ngClass"],[1,"bg-white","rounded-lg","shadow-md","p-8","text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","mx-auto","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"User Management"),r(),t(4,"div",3)(5,"div",4)(6,"input",5),P("ngModelChange",function(u){return V(o.searchTerm,u)||(o.searchTerm=u),u}),r(),t(7,"div",6),d(),t(8,"svg",7),p(9,"path",8),r()()(),h(),t(10,"button",9),g("click",function(){return o.loadUsers()}),d(),t(11,"svg",10),p(12,"path",11),r(),s(13," Refresh "),r()()(),f(14,J,6,0,"div",12)(15,q,6,1,"div",13)(16,pe,75,33,"div",14)(17,ce,7,0,"div",15),r()),e&2&&(a(6),E("ngModel",o.searchTerm),a(8),m("ngIf",o.loading),a(),m("ngIf",o.error),a(),m("ngIf",!o.loading&&o.users.length>0),a(),m("ngIf",!o.loading&&o.users.length===0))},dependencies:[A,F,D,G,N,H,O,R,z,L],encapsulation:2})};export{$ as UserManagementComponent};
